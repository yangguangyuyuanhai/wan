# Qtå‰ç«¯ç•Œé¢ - å·¥ä¸šè§†è§‰ç³»ç»Ÿ

## ğŸ“‹ æ¦‚è¿°

åŸºäºPyQt5çš„ä¸“ä¸šå·¥ä¸šè§†è§‰ç³»ç»ŸGUIç•Œé¢ï¼Œé‡‡ç”¨æµ·åº·å¨è§†é…è‰²é£æ ¼ï¼ˆæ·±è‰²ä¸»é¢˜ + è“è‰²å¼ºè°ƒè‰²ï¼‰ã€‚

## ğŸ¨ è®¾è®¡ç‰¹ç‚¹

### é…è‰²æ–¹æ¡ˆï¼ˆæµ·åº·å¨è§†é£æ ¼ï¼‰

- **ä¸»èƒŒæ™¯**: `#1E1E1E` (æ·±ç°)
- **æ¬¡èƒŒæ™¯**: `#2D2D2D` (ä¸­ç°)
- **è¾¹æ¡†**: `#3E3E3E` (æµ…ç°)
- **ä¸»è‰²è°ƒ**: `#00D9FF` (é’è“è‰²)
- **å¼ºè°ƒè‰²**: `#0099CC` (æ·±è“)
- **æ–‡å­—**: `#E0E0E0` (æµ…ç°ç™½)
- **æˆåŠŸ**: `#00CC66` (ç»¿è‰²)
- **è­¦å‘Š**: `#FFA500` (æ©™è‰²)
- **é”™è¯¯**: `#FF4444` (çº¢è‰²)

### ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å·¥ä¸šè§†è§‰ç³»ç»Ÿ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                â”‚                 â”‚
â”‚  æ§åˆ¶é¢æ¿ â”‚        å®æ—¶å›¾åƒæ˜¾ç¤ºåŒº           â”‚   ä¿¡æ¯é¢æ¿       â”‚
â”‚          â”‚                                â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ç³»ç»Ÿ  â”‚ â”‚  â”‚                          â”‚ â”‚  â”‚ æ£€æµ‹ç»“æœ  â”‚ â”‚
â”‚  â”‚æ§åˆ¶  â”‚ â”‚  â”‚      å›¾åƒæ˜¾ç¤º            â”‚ â”‚  â”‚           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                          â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚  â”‚                          â”‚ â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ç›¸æœº  â”‚ â”‚                                â”‚  â”‚ ç»Ÿè®¡ä¿¡æ¯  â”‚ â”‚
â”‚  â”‚å‚æ•°  â”‚ â”‚  FPS: 30.0                    â”‚  â”‚           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â”‚                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                                â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”‚                                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚æ£€æµ‹  â”‚ â”‚                                â”‚  â”‚ ç³»ç»Ÿæ—¥å¿—  â”‚ â”‚
â”‚  â”‚å‚æ•°  â”‚ â”‚                                â”‚  â”‚           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â”‚                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                                â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                      çŠ¶æ€æ : å°±ç»ª                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
service_qt/
â”œâ”€â”€ main_window.py          # ä¸»çª—å£
â”œâ”€â”€ widgets.py              # è‡ªå®šä¹‰æ§ä»¶
â”œâ”€â”€ styles.py               # QSSæ ·å¼è¡¨
â”œâ”€â”€ icons.py                # SVGå›¾æ ‡ï¼ˆå¾…åˆ›å»ºï¼‰
â”œâ”€â”€ dialogs.py              # å¯¹è¯æ¡†ï¼ˆå¾…åˆ›å»ºï¼‰
â”œâ”€â”€ README.md               # æœ¬æ–‡æ¡£
â””â”€â”€ requirements_qt.txt     # Qtä¾èµ–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install PyQt5 PyQt5-tools opencv-python numpy
```

### 2. è¿è¡Œç•Œé¢

```bash
cd service_new/service_qt
python main_window.py
```

## ğŸ¯ åŠŸèƒ½æ¨¡å—

### å·¦ä¾§æ§åˆ¶é¢æ¿

#### ç³»ç»Ÿæ§åˆ¶ç»„
- **è¿è¡Œæ¨¡å¼é€‰æ‹©**: å¼€å‘/ç”Ÿäº§/è°ƒè¯•æ¨¡å¼
- **å¯åŠ¨æŒ‰é’®**: å¯åŠ¨è§†è§‰ç³»ç»Ÿï¼ˆç»¿è‰²ï¼‰
- **åœæ­¢æŒ‰é’®**: åœæ­¢ç³»ç»Ÿï¼ˆçº¢è‰²ï¼‰
- **æˆªå›¾æŒ‰é’®**: ä¿å­˜å½“å‰å›¾åƒ

#### ç›¸æœºå‚æ•°ç»„
- **æ›å…‰æ—¶é—´**: 100-100000 Î¼s
- **å¢ç›Š**: 0-24 dB
- **å¸§ç‡**: 1-120 fps
- **åº”ç”¨æŒ‰é’®**: å®æ—¶åº”ç”¨å‚æ•°

#### æ£€æµ‹å‚æ•°ç»„
- **å¯ç”¨YOLO**: å¤é€‰æ¡†
- **ç½®ä¿¡åº¦é˜ˆå€¼**: 0.1-1.0
- **IOUé˜ˆå€¼**: 0.1-1.0

### ä¸­é—´æ˜¾ç¤ºåŒºåŸŸ

- **å®æ—¶å›¾åƒæ˜¾ç¤º**: æ”¯æŒç¼©æ”¾ã€æ£€æµ‹æ¡†ç»˜åˆ¶
- **FPSæ˜¾ç¤º**: å®æ—¶å¸§ç‡
- **è¿›åº¦æ¡**: å¤„ç†è¿›åº¦ï¼ˆå¯é€‰ï¼‰

### å³ä¾§ä¿¡æ¯é¢æ¿

#### æ£€æµ‹ç»“æœæ ‡ç­¾é¡µ
- **æ£€æµ‹ç»“æœè¡¨æ ¼**: ç±»åˆ«ã€ç½®ä¿¡åº¦ã€ä½ç½®
- **æ£€æµ‹ç»Ÿè®¡**: æ•°é‡ã€å¹³å‡ç½®ä¿¡åº¦

#### ç»Ÿè®¡ä¿¡æ¯æ ‡ç­¾é¡µ
- **æ€§èƒ½ç»Ÿè®¡**: å¤„ç†å¸§æ•°ã€å¹³å‡è€—æ—¶ã€é”™è¯¯æ¬¡æ•°
- **æœåŠ¡çŠ¶æ€**: å„å¾®æœåŠ¡è¿è¡ŒçŠ¶æ€

#### ç³»ç»Ÿæ—¥å¿—æ ‡ç­¾é¡µ
- **æ—¥å¿—æ˜¾ç¤º**: å½©è‰²æ—¥å¿—è¾“å‡º
- **æ¸…é™¤æŒ‰é’®**: æ¸…ç©ºæ—¥å¿—

## ğŸ¨ æ ·å¼å®šåˆ¶

### ä¿®æ”¹é…è‰²

ç¼–è¾‘ `styles.py` ä¸­çš„é¢œè‰²å€¼ï¼š

```python
# ä¸»è‰²è°ƒ
PRIMARY_COLOR = "#00D9FF"

# èƒŒæ™¯è‰²
BG_DARK = "#1E1E1E"
BG_MEDIUM = "#2D2D2D"
```

### è‡ªå®šä¹‰æ§ä»¶æ ·å¼

```python
widget.setObjectName("customWidget")
widget.setStyleSheet("""
    QWidget#customWidget {
        background-color: #2D2D2D;
        border: 1px solid #00D9FF;
    }
""")
```

## ğŸ”§ è‡ªå®šä¹‰æ§ä»¶

### ImageDisplayWidget

å›¾åƒæ˜¾ç¤ºæ§ä»¶ï¼Œæ”¯æŒæ£€æµ‹æ¡†ç»˜åˆ¶ï¼š

```python
from widgets import ImageDisplayWidget

image_widget = ImageDisplayWidget()
image_widget.set_image(image, detections)
image_widget.toggle_detections(True)
```

### StatusIndicator

çŠ¶æ€æŒ‡ç¤ºç¯ï¼š

```python
from widgets import StatusIndicator

indicator = StatusIndicator("ç›¸æœºçŠ¶æ€")
indicator.set_status("active")  # inactive/active/warning/error
```

### PerformanceChart

æ€§èƒ½æ›²çº¿å›¾ï¼š

```python
from widgets import PerformanceChart

chart = PerformanceChart("FPS", max_points=100)
chart.add_data_point(30.5)
```

## ğŸ”Œ ä¸åç«¯é›†æˆ

### è¿æ¥è§†è§‰ç³»ç»Ÿ

```python
from scheduler import PipelineScheduler
from pipeline_config import PresetConfigs

# åˆ›å»ºé…ç½®
config = PresetConfigs.development()

# åˆ›å»ºè°ƒåº¦å™¨
scheduler = PipelineScheduler(config)

# åˆå§‹åŒ–å’Œå¯åŠ¨
scheduler.initialize()
scheduler.start()
```

### å·¥ä½œçº¿ç¨‹

ä½¿ç”¨ `VisionWorkerThread` åœ¨åå°è¿è¡Œè§†è§‰ç³»ç»Ÿï¼š

```python
worker = VisionWorkerThread(config)
worker.status_update.connect(self.on_status_update)
worker.error_occurred.connect(self.on_error)
worker.start()
```

## ğŸ“Š ä¿¡å·ä¸æ§½

### ä¸»è¦ä¿¡å·

```python
# å›¾åƒæ˜¾ç¤ºæ§ä»¶
image_widget.clicked.connect(on_image_clicked)

# å·¥ä½œçº¿ç¨‹
worker.frame_ready.connect(on_frame_ready)
worker.status_update.connect(on_status_update)
worker.error_occurred.connect(on_error)

# ç›¸æœºåˆ—è¡¨
camera_list.camera_selected.connect(on_camera_selected)
```

## ğŸ¯ å¾…å®ç°åŠŸèƒ½

### é«˜ä¼˜å…ˆçº§
- [ ] å®æ—¶å›¾åƒæ›´æ–°
- [ ] æ£€æµ‹ç»“æœå®æ—¶æ˜¾ç¤º
- [ ] æ€§èƒ½ç›‘æ§å›¾è¡¨
- [ ] ç›¸æœºå‚æ•°å®æ—¶è°ƒæ•´

### ä¸­ä¼˜å…ˆçº§
- [ ] å¤šç›¸æœºåˆ‡æ¢æ˜¾ç¤º
- [ ] å½•åƒåŠŸèƒ½
- [ ] é…ç½®ä¿å­˜/åŠ è½½
- [ ] å¿«æ·é”®æ”¯æŒ

### ä½ä¼˜å…ˆçº§
- [ ] ä¸»é¢˜åˆ‡æ¢ï¼ˆäº®è‰²/æš—è‰²ï¼‰
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] è¿œç¨‹ç›‘æ§

## ğŸ› å·²çŸ¥é—®é¢˜

1. **å›¾åƒæ›´æ–°å»¶è¿Ÿ**: éœ€è¦ä¼˜åŒ–å›¾åƒä¼ è¾“æœºåˆ¶
2. **å†…å­˜å ç”¨**: é•¿æ—¶é—´è¿è¡Œå¯èƒ½å†…å­˜å¢é•¿
3. **çº¿ç¨‹åŒæ­¥**: éœ€è¦å®Œå–„çº¿ç¨‹é—´é€šä¿¡

## ğŸ“ å¼€å‘å»ºè®®

### æ€§èƒ½ä¼˜åŒ–

1. **ä½¿ç”¨QPixmapç¼“å­˜**: é¿å…é‡å¤è½¬æ¢
2. **é™åˆ¶æ›´æ–°é¢‘ç‡**: ä½¿ç”¨å®šæ—¶å™¨æ§åˆ¶åˆ·æ–°ç‡
3. **å¼‚æ­¥å¤„ç†**: è€—æ—¶æ“ä½œæ”¾å…¥å·¥ä½œçº¿ç¨‹

### ä»£ç è§„èŒƒ

1. **ä¿¡å·å‘½å**: ä½¿ç”¨ `xxx_changed`, `xxx_clicked` æ ¼å¼
2. **æ§½å‡½æ•°å‘½å**: ä½¿ç”¨ `on_xxx` æ ¼å¼
3. **å¯¹è±¡åç§°**: ä½¿ç”¨é©¼å³°å‘½åï¼Œä¾¿äºQSSé€‰æ‹©

### è°ƒè¯•æŠ€å·§

```python
# å¯ç”¨Qtè°ƒè¯•è¾“å‡º
import os
os.environ['QT_DEBUG_PLUGINS'] = '1'

# æ‰“å°æ§ä»¶æ ‘
def print_widget_tree(widget, indent=0):
    print("  " * indent + widget.objectName())
    for child in widget.children():
        if isinstance(child, QWidget):
            print_widget_tree(child, indent + 1)
```

## ğŸ“š å‚è€ƒèµ„æ–™

- [PyQt5 å®˜æ–¹æ–‡æ¡£](https://www.riverbankcomputing.com/static/Docs/PyQt5/)
- [Qtæ ·å¼è¡¨å‚è€ƒ](https://doc.qt.io/qt-5/stylesheet-reference.html)
- [æµ·åº·å¨è§†è®¾è®¡è§„èŒƒ](https://www.hikvision.com/)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### æäº¤è§„èŒƒ

- **åŠŸèƒ½**: `feat: æ·»åŠ xxxåŠŸèƒ½`
- **ä¿®å¤**: `fix: ä¿®å¤xxxé—®é¢˜`
- **æ ·å¼**: `style: ä¼˜åŒ–xxxæ ·å¼`
- **æ–‡æ¡£**: `docs: æ›´æ–°xxxæ–‡æ¡£`

---

**ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2025-01-29  
**ä½œè€…**: Kiro AI Assistant
