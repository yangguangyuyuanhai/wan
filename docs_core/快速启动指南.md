# 🚀 快速启动指南 - service_new

## 📍 你现在在哪里？

你现在在 `service_new` 目录，这是**改进后的完整工业视觉系统**。

```
F:\MVS\
├── [旧版本文件...]           # 之前的不成熟代码
└── service_new/              # ← 你在这里！新版本系统
    ├── main.py               # 主程序
    ├── scheduler.py          # 调度器
    ├── pipeline_core.py      # 管道核心
    ├── pipeline_config.py    # 配置管理
    ├── logger_config.py      # 日志模块
    ├── requirements.txt      # 依赖列表
    ├── services/             # 微服务目录
    └── docs/                 # 文档目录
```

---

## ⚡ 3步快速启动

### 第1步：安装依赖（1分钟）

```bash
# 确保你在 service_new 目录
cd F:\MVS\service_new

# 安装依赖
pip install -r requirements.txt
```

### 第2步：设置环境变量（30秒）

```cmd
# Windows命令行
setx MVCAM_COMMON_RUNENV "F:\MVS"

# 重启命令行窗口
```

### 第3步：运行系统（10秒）

```bash
# 在 service_new 目录运行
python main.py
```

**就这么简单！** 🎉

---

## 📖 文档在哪里？

所有文档都在 `docs/` 目录：

```
service_new/docs/
├── README.md                  # 项目总览 ⭐⭐⭐
├── 快速开始.md                # 5分钟上手 ⭐⭐⭐
├── 系统架构说明.md            # 完整架构 ⭐⭐
├── 项目总结.md                # 创建总结 ⭐
└── 开始使用_最终版.md         # 最终指南 ⭐
```

### 推荐阅读顺序

1. **service_new/README.md** - 先看这个（5分钟）
2. **docs/快速开始.md** - 快速上手（10分钟）
3. **运行系统** - `python main.py`（5分钟）
4. **docs/系统架构说明.md** - 深入理解（30分钟）

---

## 🎯 常用命令

### 基础运行

```bash
# 确保在 service_new 目录
cd F:\MVS\service_new

# 开发模式（默认）
python main.py

# 生产模式
python main.py --mode production

# 调试模式
python main.py --mode debug
```

### 自定义参数

```bash
# 设置相机参数
python main.py --exposure 15000 --gain 12.0

# 设置YOLO参数
python main.py --yolo-model ../models/yolov8n.pt --confidence 0.6

# 禁用显示
python main.py --no-display

# 启用图像保存
python main.py --save-images
```

### 查看帮助

```bash
python main.py --help
```

---

## 📁 目录结构说明

```
service_new/                   # 新版本系统根目录
│
├── 核心模块（7个文件）
│   ├── main.py                # 主程序（上帝类）⭐⭐⭐
│   ├── scheduler.py           # 调度器 ⭐⭐⭐
│   ├── pipeline_core.py       # 管道核心 ⭐⭐⭐
│   ├── pipeline_config.py     # 配置管理 ⭐⭐
│   ├── logger_config.py       # 日志模块 ⭐⭐
│   ├── requirements.txt       # 依赖列表
│   └── README.md              # 项目说明
│
├── services/                  # 微服务目录（7个文件）
│   ├── __init__.py
│   ├── camera_service.py      # 相机采集
│   ├── preprocess_service.py  # 图像预处理
│   ├── yolo_service.py        # YOLO检测
│   ├── opencv_service.py      # OpenCV处理
│   ├── display_service.py     # 实时显示
│   └── storage_service.py     # 数据存储
│
├── docs/                      # 文档目录（5个文件）
│   ├── README.md              # 项目总览
│   ├── 快速开始.md            # 快速上手
│   ├── 系统架构说明.md        # 完整架构
│   ├── 项目总结.md            # 创建总结
│   └── 开始使用_最终版.md     # 最终指南
│
├── logs/                      # 日志目录（自动创建）
│   ├── CameraApp_detail.log
│   ├── CameraApp_error.log
│   └── CameraApp_daily.log
│
└── output/                    # 输出目录（自动创建）
    ├── images/                # 保存的图像
    └── detections.json        # 检测结果
```

---

## 🔍 与旧版本的区别

### 旧版本（根目录）

```
F:\MVS\
├── my_camera_app.py           # 简单示例
├── camera_opencv_demo.py      # OpenCV示例
├── camera_app_with_logger.py  # 带日志示例
└── [其他不成熟代码...]
```

**特点：** 简单、分散、不完整

### 新版本（service_new）

```
F:\MVS\service_new\
├── main.py                    # 统一入口
├── scheduler.py               # 调度器
├── pipeline_core.py           # 管道核心
├── services/                  # 微服务
└── docs/                      # 完整文档
```

**特点：** 完整、模块化、专业、可扩展

---

## ✅ 检查清单

运行前确认：

- [ ] 在 `service_new` 目录
- [ ] Python 3.6+ 已安装
- [ ] 依赖已安装（`pip install -r requirements.txt`）
- [ ] 相机已连接
- [ ] 驱动已安装
- [ ] 环境变量已设置（`MVCAM_COMMON_RUNENV`）

---

## 🎓 学习路径

### 第1天：快速体验
```bash
cd F:\MVS\service_new
python main.py
```

### 第2天：阅读文档
- README.md
- docs/快速开始.md

### 第3天：理解架构
- docs/系统架构说明.md
- pipeline_config.py

### 第4天：查看代码
- services/ 目录
- 各个服务实现

### 第5天：自定义开发
- 修改配置
- 添加新功能

---

## 💡 小技巧

### 1. 快速测试

```bash
# 调试模式，只采集少量帧
python main.py --mode debug
```

### 2. 查看日志

```bash
# 实时查看日志
type logs\CameraApp_detail.log
```

### 3. 禁用某个服务

编辑 `pipeline_config.py`：

```python
class YOLOServiceConfig:
    enabled = False  # 禁用YOLO
```

### 4. 查看配置

运行后会自动打印当前配置

---

## 🐛 遇到问题？

### 1. 找不到相机

```bash
# 检查环境变量
echo %MVCAM_COMMON_RUNENV%
# 应该输出: F:\MVS
```

### 2. YOLO加载失败

```bash
# 安装ultralytics
pip install ultralytics

# 或禁用YOLO
# 编辑 pipeline_config.py
yolo_service.enabled = False
```

### 3. 查看详细日志

```bash
# 使用调试模式
python main.py --mode debug

# 查看日志文件
type logs\CameraApp_detail.log
```

---

## 📞 获取帮助

### 查看文档

```bash
# 项目说明
type README.md

# 快速开始
type docs\快速开始.md

# 系统架构
type docs\系统架构说明.md
```

### 查看帮助

```bash
python main.py --help
```

### 查看日志

```bash
# 详细日志
type logs\CameraApp_detail.log

# 错误日志
type logs\CameraApp_error.log
```

---

## 🎉 开始你的视觉之旅

```bash
# 1. 进入目录
cd F:\MVS\service_new

# 2. 安装依赖
pip install -r requirements.txt

# 3. 运行系统
python main.py

# 4. 观察输出
# - 系统初始化信息
# - 找到的相机设备
# - 实时图像显示
# - FPS信息

# 5. 停止系统
# 按 Ctrl+C 或在窗口按 q 键
```

---

## 📊 系统特点

✅ **管道-过滤器架构** - 清晰的数据流  
✅ **微服务设计** - 独立的功能模块  
✅ **上帝类管理** - 统一的系统入口  
✅ **配置化管理** - 灵活的参数配置  
✅ **完整日志** - 详细的运行记录  
✅ **性能监控** - 实时统计信息  
✅ **易于扩展** - 添加新功能简单  
✅ **完整文档** - 详细的使用说明  

---

**立即开始！** 🚀

```bash
cd F:\MVS\service_new
python main.py
```

**祝你使用愉快！** 🎊

---

**版本：** 1.0.0  
**创建日期：** 2025-01-29  
**作者：** Kiro AI Assistant
