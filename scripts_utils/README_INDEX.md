# 工具批处理脚本索引

本目录包含系统工具和辅助功能的所有批处理脚本。

## 📜 脚本列表

### 启动工具
- **一键启动所有版本.bat** - 交互式启动菜单
  - 选择启动不同版本
  - 统一的启动入口
  - 用户友好的菜单

### 环境工具
- **检查环境.bat** - 检查系统环境
  - 检查Python版本
  - 检查依赖包
  - 检查SDK安装
  - 生成环境报告

- **安装依赖.bat** - 安装项目依赖
  - 自动激活conda环境
  - 安装requirements.txt
  - 验证安装结果

### 测试工具
- **快速测试.bat** - 快速系统测试
  - 运行导入测试
  - 运行功能测试
  - 生成测试报告

## 🚀 使用方法

### 一键启动所有版本
```bash
# 直接双击运行
一键启动所有版本.bat

# 会显示菜单：
# 1. 启动Qt GUI界面
# 2. 启动同步版本
# 3. 启动异步版本
# 4. 运行系统测试
# 5. 退出
```

### 检查环境
```bash
# 检查系统环境
检查环境.bat

# 会检查：
# - Python版本
# - conda环境
# - 依赖包安装情况
# - SDK配置
```

### 安装依赖
```bash
# 安装所有依赖
安装依赖.bat

# 会安装：
# - 核心依赖（requirements.txt）
# - 异步依赖（service_asyncio/requirements.txt）
# - Qt依赖（service_qt/requirements_qt.txt）
```

### 快速测试
```bash
# 运行快速测试
快速测试.bat

# 会执行：
# - 模块导入测试
# - 系统功能测试
# - 生成测试报告
```

## 📝 脚本详细说明

### 一键启动所有版本.bat
**功能**: 提供统一的启动入口

**菜单选项**:
1. **启动Qt GUI界面** - 调用 `scripts_qt/启动GUI.bat`
2. **启动同步版本** - 调用 `scripts_core/启动同步版本.bat`
3. **启动异步版本** - 调用 `scripts_asyncio/启动异步版本.bat`
4. **运行系统测试** - 调用 `快速测试.bat`
5. **退出** - 退出菜单

**特点**:
- 交互式菜单
- 自动返回菜单
- 错误处理
- 用户友好

---

### 检查环境.bat
**功能**: 全面检查系统环境

**检查项目**:
1. **Python环境**
   - Python版本
   - Python路径
   - pip版本

2. **conda环境**
   - conda版本
   - 当前环境
   - 环境列表

3. **依赖包**
   - numpy
   - opencv-python
   - PyQt5（可选）
   - ultralytics（可选）

4. **SDK配置**
   - MVCAM_COMMON_RUNENV环境变量
   - SDK路径是否存在
   - SDK版本信息

**输出**:
- 控制台显示检查结果
- 生成环境报告文件（可选）

---

### 安装依赖.bat
**功能**: 自动安装所有依赖包

**安装流程**:
1. 激活conda环境
2. 升级pip
3. 安装核心依赖
4. 安装异步依赖
5. 安装Qt依赖（可选）
6. 验证安装

**依赖列表**:
- **核心依赖**:
  - numpy
  - opencv-python
  
- **异步依赖**:
  - asyncio（Python 3.7+内置）
  
- **Qt依赖**:
  - PyQt5
  
- **可选依赖**:
  - ultralytics（YOLO）
  - pytest（测试）

---

### 快速测试.bat
**功能**: 快速运行系统测试

**测试流程**:
1. 激活conda环境
2. 运行导入测试
3. 运行系统测试
4. 生成测试报告
5. 显示测试结果

**测试内容**:
- 模块导入测试
- 管道核心功能测试
- 过滤器执行测试
- 配置加载测试

## 🔧 自定义配置

### 修改conda环境
所有脚本中修改环境名称：
```batch
call C:\Users\YRQ\miniconda3\Scripts\activate.bat 你的环境名
```

### 添加新的启动选项
编辑 `一键启动所有版本.bat`，添加新选项：
```batch
echo 6. 你的新选项
if "%choice%"=="6" goto new_option

:new_option
echo 执行新选项...
call 你的脚本.bat
goto menu
```

### 自定义环境检查
编辑 `检查环境.bat`，添加新的检查项：
```batch
echo 检查新项目...
python -c "import 你的模块"
if errorlevel 1 (
    echo [失败] 新项目未安装
) else (
    echo [成功] 新项目已安装
)
```

## 📂 相关目录

- **核心脚本**: ../scripts_core/
- **异步脚本**: ../scripts_asyncio/
- **Qt脚本**: ../scripts_qt/
- **核心测试**: ../tests_core/
- **文档**: ../docs_core/

## 🔗 脚本调用关系

```
一键启动所有版本.bat
├── scripts_qt/启动GUI.bat
├── scripts_core/启动同步版本.bat
├── scripts_asyncio/启动异步版本.bat
└── 快速测试.bat
    ├── tests_core/test_imports.py
    └── tests_core/test_system.py
```

## 🐛 故障排除

### 问题1：找不到conda命令
**解决**: 
- 检查conda安装路径
- 修改脚本中的activate.bat路径
- 或手动激活环境后运行

### 问题2：依赖安装失败
**解决**:
- 检查网络连接
- 使用国内镜像源
- 手动安装失败的包

### 问题3：环境检查报错
**解决**:
- 确保Python在PATH中
- 确保conda环境已激活
- 检查权限问题

### 问题4：测试失败
**解决**:
- 查看详细错误信息
- 检查依赖是否完整
- 运行环境检查脚本

## 💡 使用建议

### 首次使用
1. 运行 `检查环境.bat` 检查环境
2. 运行 `安装依赖.bat` 安装依赖
3. 运行 `快速测试.bat` 验证安装
4. 使用 `一键启动所有版本.bat` 启动系统

### 日常使用
- 使用 `一键启动所有版本.bat` 作为主入口
- 定期运行 `快速测试.bat` 验证系统
- 更新代码后运行 `检查环境.bat`

### 问题排查
1. 运行 `检查环境.bat` 检查环境
2. 查看生成的环境报告
3. 根据报告修复问题
4. 重新运行测试验证

## 📊 脚本统计

- 启动工具: 1个
- 环境工具: 2个
- 测试工具: 1个
- **总计**: 4个

## 📝 脚本维护

### 添加新工具脚本
1. 创建新的.bat文件
2. 添加到本目录
3. 更新README_INDEX.md
4. 更新一键启动菜单（如需要）

### 脚本规范
- 使用UTF-8编码（chcp 65001）
- 包含清晰的注释
- 处理错误情况
- 提供用户反馈
- 支持返回菜单

### 测试脚本
- 在不同环境测试
- 测试错误处理
- 测试用户交互
- 验证输出结果

## 📝 文档维护

- 所有工具批处理脚本都应放在此目录
- 脚本应包含清晰的注释和说明
- 脚本应处理各种错误情况
- 脚本应提供友好的用户界面
- 定期更新索引文档
